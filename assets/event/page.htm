<div class="event-page">
  
  <div class="-sidebar">
    
    <div class="-picture">
      <img src="{pic}"/>

      {?pic_change}
        <ul class="actions">
	  <li class="-stack">
	    <a class="action-button -admin" href="{this}">
	      {`Event_Pic_Change}
	    </a>
	  </li>
	</ul>
      {/?}
    </div>
    
    <ul class="-navig">
      {#navig}
        <li class="{cls}">
	  <a href="{url}">
	    <span class="{size}">{count}</span> { `Event_Section label } 
	  </a>
	</li>
      {/#}
    </ul>

  </div>
  
  <div class="-main">
    
    <div class="-head">
      {?admin}
        <ul class="actions">
	  <li class="-r">
	    <a class="action-button -admin" href="{url}">
	      {`Event_Admin}
	    </a>
	  </li>
	  <li class="-r">
	    <a class="action-button -green" href="{invite}">
	      {`Event_Invite}
	    </a>
	  </li>
	</ul>
      {/?}
      <h2>{title}</h2>
      <div class="-details">
	{?date}{`ShortWeekDate this}{else}{`Events_NoDate}{/?}
	{?status}&emsp;{ this | Asset_Status_Tag.render | ohm } {/?}
      </div>
    </div>
    
    <div class="entity-info">
      
      <div class="-main">
	{?desc}<p>{this}</p>{else}
  	  <div class="empty-text">{`Event_Desc_Empty}</div>
	{/?}
      </div>
      
      <div class="-side">
	<dl>
	  {?time}
	    <dt>
	      {`Event_When} 
	    </dt>
	    <dd>
	      {`WeekDate this}
	    </dd>
	  {/?}
	  {?location}
	    <dt>
	      {`Event_Where}
	    </dt>
	    <dd>
	      <a href="{url}">{name}</a>
	    </dd>
	  {/?}
	</dl>
      </div>
      
      <div class="actions">
	<li class="-r">
	  <a href="{details}" class="action-button">{`Event_More_Details}</a>
	</li>
      </div>
      
    </div>
    
    <div class="-contents">
      
      {box|verbatim}
      
    </div>
  </div>
  
</div>
  
<style>
  
.event-page {

  .-sidebar {
    width: 230px;
    margin-right: 10px;
    padding-bottom: 30px;
    float: left;

    .-picture {
      position: relative;
      min-height: 250px;

      img {
        display: block;
      }
    }

    .actions {
      margin: 0;
      position: absolute;
      width: 230px;
      bottom: 4px;
      visibility: hidden;
    }

    .-picture:hover .actions {
      visibility: visible;
    }

    .-navig {
      list-style-type: none;
      margin: 5px 0;
      padding: 30px 0;

      a {
        display: block;
        overflow: hidden;
        margin: 4px -1px 4px 0;
        padding: 5px 5px 5px 30px;
        line-height: 30px;
        font-size: 20px;
        color: #888;
        text-align: right;
        background-color: transparent;
      }

      li span {
        width: 30px;
        height: 30px;
        margin: 0 8px;
        border-radius: 30px;
        background-color: #888;
        display: block;
        float: right;
        line-height: 30px;
        text-align: center;
        color: white;
        font-size: 21px;
        text-shadow: 0 -1px 0 #333;
        font-weight: bold;
        font-family: 'Open Sans Condensed', sans-serif;
        overflow: hidden;

        &.-d2 { font-size: 15px; }
        &.-d3 { font-size: 13px; }
        &.-d0 { background-color: white; }
      }

      a:hover {
        color: #333;

        span {
          background-color: #333;
          text-shadow: 0 -1px 0 black;
        }
      }

      .-selected a, .-selected a:hover {
        color: black;

        span {
          background-color: black;
          text-shadow: 0 -1px 0 #888;
        }
      }

      .-selected:after, 
      .-selected:before {
        border: medium solid transparent;
        content: " ";
        height: 0;
        pointer-events: none;
        position: absolute;
        right: -11px;
        width: 0;
      }

      .-selected:after {
        border-right-color: white;
        border-width: 14px;
        margin-top: -14px;
        top: 50%;
      }

      .-selected:before {
        border-right-color: #BBB;
        border-width: 15px;
        margin-top: -15px;
        top: 50%;
      }

      .-selected {
        position: relative;
      }
    }
  }

  .-main {
    overflow: hidden;

    .-head {
      overflow: hidden;

      .actions {
        float: right;
        width: 290px;
        margin:  0 0 -5px 0;
      }

      h2 {
        margin: 0;
        font-weight: normal;
        color: #333;
        overflow: hidden;
        white-space: nowrap;
        font-size: 21.5px;
      }

      .-details {
        overflow: hidden;
        color: #888;
        height: 15px;
        line-height: 15px;
        font-size: 12px;
        margin-bottom: 20px;
      }
    }

    .-contents {
      margin: 12px 3px 20px 0;
      border: 1px solid #CCC;
      border-radius: 4px;
    }
  }
}

.entity-info {
  font-size: 13px;
  overflow: hidden;
  position: relative;
  min-height: 96px;

  .-main {
    float: left;
    width: 360px;
    margin: 0 12px;
  
    p { margin: 12px 0; }
  }

  .-side {
    overflow: hidden;
    margin: 12px;
    font-size: 12px;
  }

  dl {
    margin: 0;
    oveflow: hidden;
  }

  dt {
    color: #555;
    width: 80px;
    float: left;
    clear: left;
    text-align: right;
    margin: 2px;
  }

  .actions {
    margin: 0;
    position: absolute;
    bottom: 1px;
    right: 1px; 

    .actions li.-r {
      margin-left: 0px;
    }
  }

  dd {
    margin: 0 0 0 92px;
    padding: 2px 0;
  }
}

</style>
