<div class="edit-join-fields">
  {list|verbatim}
  {?form}{this|Asset_JoinForm_Create.render|ohm}{/?}
</div>

{@!field}
  <div {$f} class="-field{if extern} -extern{/if}">
    <span class="-label">
      {if extern}<span style="color:#888">{`JoinForm_Source_Profile}</span>{/if}
      {label}
      {if required}<span class="-required">{`JoinForm_Required}</span>{/if}
    </span>
    <a {$e} class="action-button" style="float:right;margin:0" href="javascript:void(0)">
      {`JoinForm_Edit}
    </a>      
    <div class="-aspect">
      {edit|ohm}
    </div>
  </div>
  <script type="endpoint:json">
here.$e.click () ->
  pos = here.$f.prevAll().length - 1
  to_endpoint endpoint, ["Form",pos], (r) ->
    if r.edit 
      here.$f.replaceWith(r.edit.html)
      call r.edit.code
    call r.code
  </script>
{/@}

{@!longtext}<input type="text" readonly value="{`JoinForm_Kind_LongText}"/>{/@}
{@!textarea}<textarea readonly="true">{`JoinForm_Kind_Textarea}</textarea>{/@}
{@!date}<input type="text" readonly value="{`JoinForm_Kind_Date}"/>{/@}
{@!checkbox}<input type="checkbox" readonly/>{/@}

{@!pickone}
  {#this|ohm}<label><input type="radio" readonly/> {this}</label>{/#}
{/@}

{@!pickmany}
  {#this|ohm}<label><input type="checkbox" readonly/> {this}</label>{/#}
{/@}

<style>
.edit-join-fields {
  margin: 20px auto;
  width: 600px;

  .-field {
    position: relative;
    background-color: white;
    border: 1px solid #BBBBBB;
    border-radius: 4px 4px 4px 4px;
    box-shadow: 0 0 3px #BBBBBB;
    margin-bottom: 10px;
    padding: 8px;
    overflow:hidden;
  }

  .-required {
    display: block;
    color: #BBB;
    font-size: 12px;
    padding-right: 4px;
  }

  .-field.-extern {
    background-color: #EFF;
  }

  .-aspect {
    overflow: hidden;
    padding: 0 8px;
    opacity: 0.5;
    
    input[type="text"], textarea {
      border: 1px solid #CCC;
      .asap();
      font-size: 12px;
      padding: 3px;
      width: 225px;
      margin: 0;
    }

    label {         
      display: block;
      font-size: 13px;
      line-height: 18px;
      input {
        margin: 2px;
        vertical-align: top;
      } 
    }
 
    textarea {
      height: 36px;
    }
  }

  .-label {
    float: left;
    font-size: 13px;
    margin-top: 3px;
    text-align: right;
    width: 175px;
  }

}
</style>
