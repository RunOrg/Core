<div class="avatar-picker">
  <div {$list} class="-list -loading">
  </div>
</div>

<script type="search:string">
$.get search, {}, (data) ->
  if "list" of data
    here.$list.html("")
    for item in list
      html.push item.html
    here.$list.html(html.join("")).removeClass("-loading")
    for item in list
      call item.code
  call data.code
</script>

<style>
.avatar-picker {

  .-list {
    height: 200px;
    width: 600px;
    padding: 16px;
    border: 1px solid #CCC;
    background-color: white;
  }

  .-list.-loading {
    background: url(/public/icon/ajax-load.gif) center center no-repeat white;
  }

}
</style>
